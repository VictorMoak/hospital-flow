<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Chamada de Pacientes</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
	</head>
	<body>
		<div class="container mt-5 text-center">
			<h1>Chamada de Pacientes</h1>
			<audio id="somChamada" src="asserts/sounds/livechat-129007.mp3"></audio>
			<button id="chamarPaciente" class="btn btn-primary mt-4">
				Chamar Próximo Paciente
			</button>
			<button id="som" class="btn btn-success mt-4">Som Ativado</button>

			<h2 id="pacienteAtual" class="mt-5"></h2>
		</div>
		<script>
			const pacientes = ["João Silva", "Maria Oliveira", "Carlos Santos"];
			const pacienteAtual = document.getElementById("pacienteAtual");
			const chamarPaciente = document.getElementById("chamarPaciente");
			const btnSom = document.getElementById("som");
			let isActiveSom = true;
			const somDeChamado = document.getElementById("somChamada");

			btnSom.addEventListener("click", () => {
				console.log(isActiveSom);
				isActiveSom = !isActiveSom;
				if (!isActiveSom) {
					btnSom.className = "btn btn-danger mt-4"
          btnSom.textContent = "Som Desativado"
				}
        if(isActiveSom){
          btnSom.className = "btn btn-success mt-4"
          btnSom.textContent = "Som Ativado"
        }
			});

			chamarPaciente.addEventListener("click", () => {
				if (pacientes.length > 0) {
					if (isActiveSom === true) {
						const chamado = pacientes.shift();
						pacienteAtual.textContent = `Paciente chamado: ${chamado}`;
						somDeChamado.play();
					}
					if (isActiveSom === false) {
						const chamado = pacientes.shift();
						pacienteAtual.textContent = `Paciente chamado: ${chamado}`;
					}
				} else {
					pacienteAtual.textContent = "Não há pacientes na fila.";
				}
			});
		</script>
	</body>
</html>
